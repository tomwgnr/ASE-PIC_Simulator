\documentclass[12pt,a4paper,titlepage,ngerman,pdftex]{report}
\usepackage[utf8]{inputenc}
\usepackage[german]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{acronym}
\usepackage{setspace}
\usepackage{geometry}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{textcomp}
\geometry{a4paper, top=25mm, left=25mm, right=25mm, bottom=25mm,
    headsep=10mm, footskip=12mm}
\usepackage{xcolor}

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.827, 0.827, 0.827}
\definecolor{dkblue}{rgb}{0,0,.6}
\definecolor{dkyellow}{cmyk}{0,0,.8,.3}

\lstset{
    language        = php,
    basicstyle      = \small\ttfamily,
    keywordstyle    = \color{dkblue},
    stringstyle     = \color{red},
    identifierstyle = \color{mygreen},
    commentstyle    = \color{gray},
    emph            =[1]{php},
    emphstyle       =[1]\color{black},
    emph            =[2]{if,and,or,else},
    emphstyle       =[2]\color{dkyellow}}

\lstset{ %
    backgroundcolor=\color{backcolour},   % choose the background color
    basicstyle=\footnotesize,        % size of fonts used for the code
    breaklines=true,                 % automatic line breaking only at whitespace
    captionpos=b,                    % sets the caption-position to bottom
    commentstyle=\color{mygreen},    % comment style
    escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
    keywordstyle=\color{blue},       % keyword style
    stringstyle=\color{mymauve},     % string literal stylebreakatwhitespace=false,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=true,
    showtabs=false,
    tabsize=2
}

\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%    TITLE    %%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \begin{titlepage}
        \centering
        %\includegraphics[width=0.15\textwidth]{pic/picsim_logo_full.png}\par\vspace{1cm}
        {\scshape\LARGE Duale Hochschule Baden-Württemberg \par}
        \vspace{1cm}
        {\scshape\Large Advanced Software Engineering 2 \\--\\ Dokumentation\par}
        \vspace{1.5cm}
        {\huge\bfseries PIC-Simulator\par}
        \vspace{2cm}
        {\Large\itshape David Eymann, Tom Wagner\par}
        \vfill
        Dozent\par
        Daniel \textsc{Lindner}

        \vfill

% Bottom of the page
        {\large \today\par}
    \end{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%  LISTINGS  %%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \pagenumbering{Roman}
    \tableofcontents
    \listoffigures
    \lstlistoflistings

    \onehalfspacing
    \pagenumbering{arabic}

    \chapter{Projektbeschreibung}\label{ch:projektbeschreibung}
    Als Basis für diese Arbeit dient ein PIC-Simulator, PIC steht hierbei für ein Mikrocontroller von Microchip Technology\footnote{\url{https://en.wikipedia.org/wiki/Microchip_Technology}}.
    Der Simulator ist in C-\# geschrieben und mit Windows Forms Erhält er seine Grafische Oberfläche.
    \textbf{Das für diese Abgabe relevante Repository befindet sich unter:} \\ \url{https://github.com/tomwgnr/ASE-PIC_Simulator}\\
    
    

    \section{Einrichtung}\label{sec:einrichtung}

    \chapter{Entwicklung}\label{ch:entwicklung}
    \section{Clean Architecture}\label{sec:cleanarchitecture}
 
    \section{Refactoring}\label{sec:refactoring}

    In diesem Abschnitt wird eine Auswahl der identifizierten Code Smells und eingesetzten Refactorings vorgestellt. Hierbei handelt es sich natürch nicht um alle Beispiele welche in diesem Projekt vorkommen und es sind noch einige, vor allem Code Smells, im Code vorhanden. 

    \subsection{Code Smells}

    \subsubsection{Switch Statement}

    Die urspüngliche "Decode"- Klasse beinhaltet exakt eine Methode mit dem Namen "analyse()", welche einen Operationcode einließt und den entsprechenden Command aufruft. In dieser sind eine Reihe von Code Smells zu erkennen: Unter Anderem Code Comments, was hier auf eine Long Method hindeutet.
    Kernproblem dieser Methode ist jedoch das sich darin befindende riesige Switch-Statement und damit der dazugehörige Code Smell. Dies erschwert es unter anderem, einen neuen Command dem PIC-Simulator hinzuzufügen,
    da dieser dem Switch-Statement hinzugefügt werden muss. Dieser Vorgang kann fehleranfällig sein und außerdem wird dadurch das Open-Closed-Principle der SOLID Principles(\autoref{subsec:solid}) verletzt. 
    Dieser Code Smell wurde durch den Einsatz einer Zuständigkeitskette als Entwurfsmuster behoben, welches in \autoref{sec:entwurfsmuster} erläutert wird.

    \subsubsection{Long Method}

    Eine Weitere Methode welche deutlich zu groß ist und definitiv unter den Code Smell Long Method fällt ist die ehemalige "writeByte()" Methode der "Memory"- Klasse. Diese ist schnell zu erkennen, da auch hier einige Code Comments zu finden sind und auch einfach an der unnötig hohen Zeilenanzahl.
    Eine zu lange Methode führt zu einer Reihe möglicher Probleme. Dazu gehören erschwerte Lesbarkeit und Wartung sowie erhöhtes Fehlerrisiko und Risiko auf unnötige Wiederholung von Code. Damit werden unter anderem die Programming Principles DRY und Single Responsibility verletzt. 
    Behoben wird der Code Smell durch ein Extract Method refactoring, welches unten beschrieben wird.
    
    \subsubsection{Duplicated Code}

    Die einzelnen Commands beinhalten zu einem größen Teil gleiche oder ähnliche Funktionen, welche in jedem einzelnen Command neu implementiert wurden. Dadurch war ein beträchtlicher Teil des Codes mehrfach vorhanden, was zur Folge hatte,
    dass eine Änderung immer an allen Commands durchgeführt werden musste. Dies wurde in dem Schritt gelöst, in dem auch die "Cpu"- Klasse aufgelöst wurde und jeder Command in einer eingenen Klasse definiert wurde. 
    Dabei wurde eine abstrakte Oberklasse "Command" eingeführt, in welcher die sich widerholenden Funktionen definiert sind.

    \subsection{Refactoring}

    \subsubsection{Extract Method}

    \colorbox[mygreen]{writeByte!}


    \section{Unit Tests}

    \subsection{Einsatz von Mocks}

    \subsection{ATRIP-Regeln}

    \subsubsection{Automatic}

    \subsubsection{Thorough}\label{subsec:thorough}

    \subsubsection{Repeatable}

    \subsubsection{Independent}

    \subsubsection{Professional}

    \section{Programming Principles}

    \subsection{SOLID}\label{subsec:solid}
    
    \subsubsection{Single responsibility principle}

    \subsubsection{Open/Closed principle}

    \subsubsection{Liskov substitution principle}

    \subsubsection{Interface segregation principle}

    \subsubsection{Dependency inversion principle}

    \subsection{GRASP}

    \subsubsection{High Cohesion}

    \subsubsection{Low Coupling}
    
    \subsection{DRY -- Don't Repeat Yourself}

    \section{Entwurfsmuster}\label{sec:entwurfsmuster}

\end{document}
